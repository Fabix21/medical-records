<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- Font Awesome -->
    <link href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" rel="stylesheet">
    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="/css/mdb.min.css" rel="stylesheet">
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="ie=edge" http-equiv="x-ua-compatible">
    <title>Lista Pacjentów</title>
</head>
<style>
    .card {
        min-height: 75vh;
    }

    .md-form {
        margin-top: 8px !important;
    }

    .has-error label {
        color: #ff3547 !important;
    }

    .has-error input.form-control {
        border-bottom-color: #ff3547 !important;
    }

    .help-block {
        margin-bottom: 0;
    }

    .has-error .messages {
    }

    .select-wrapper + label {

        transform: translateY(-14px);
    }

    .select-wrapper + label.active {
        transform: translateY(-28px);
        left: 0;
    }
</style>
<body>
<header>
</header>

<!--Navbar-->
<nav class="navbar navbar-expand-lg navbar-dark primary-color">

    <!-- Navbar brand -->
    <a class="navbar-brand" href="#">Dokumentacja Medyczna</a>

    <!-- Collapse button -->
    <button aria-controls="basicExampleNav" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler"
            data-target="#basicExampleNav" data-toggle="collapse" type="button">
        <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="basicExampleNav">

        <!-- Links -->
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" th:href="@{/addPatient/1/1}">Pacjenci
                    <span class="sr-only">(current)</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" th:href="@{/checkDoc/}">Dokumentacje
                    <span class="sr-only">(current)</span>
                </a>
            </li>

        </ul>
        <!-- Links -->

        <form class="form-inline">
            <div class="md-form my-0">
                <a class="btn btn-danger" data-mdb-ripple-color="dark" th:href="@{/logout}" type="button">
                    Wyloguj
                </a>
            </div>
        </form>
    </div>
    <!-- Collapsible content -->

</nav>
<!--/.Navbar-->

<h1>Lista dostępnych Pacjentów</h1>

<a class="btn btn-primary btn-sm mb-3" th:href="@{/addPatient}"> Dodaj Pacjenta </a>
<p class="alert alert-primary" th:if="${message ne null}" th:text="${message}"></p>
<table class="table table-striped table-responsive-md">
    <thead>
    <tr>
        <th>
            <a th:href="@{'/page/' + ${currentPage} + '?sortField=firstName&sortDir=' + ${reverseSortDir}}">
                Imię Pacjenta</a>
        </th>
        <th>
            <a th:href="@{'/page/' + ${currentPage} + '?sortField=lastName&sortDir=' + ${reverseSortDir}}">
                Nazwisko Pacjenta</a>
        </th>
        <th>
            <a th:href="@{'/page/' + ${currentPage} + '?sortField=email&sortDir=' + ${reverseSortDir}}">
                PESEL</a>
        </th>

        <th>
            <a th:href="@{'/page/' + ${currentPage} + '?sortField=email&sortDir=' + ${reverseSortDir}}">
                Number NFZ</a>
        </th>
        <th>
            <a th:href="@{'/page/' + ${currentPage} + '?sortField=email&sortDir=' + ${reverseSortDir}}">
                Data Urodzenia</a>
        </th>
        <th> Dodaj Dokument</th>
        <th> Wyślij</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="user : ${listOfUsers}">
        <form class="md-form" enctype="multipart/form-data" method="post" th:action="@{/upload}">
            <td th:text="${user.name}"></td>
            <td th:text="${user.surname}"></td>
            <td th:text="${user.pesel}"></td>
            <td th:text="${user.nfzID}"></td>
            <td th:text="${user.dateOfBirth}"></td>
            <td>

                <section class="section-preview">
                    <div class="file-field">
                        <div class="btn btn-primary btn-sm float-left waves-effect waves-light">
                            <span>Wybierz plik</span>
                            <input name="file" type="file">
                        </div>
                        <div class="file-path-wrapper">
                            <label>
                                <input class="file-path validate" placeholder="Wprowadz dokumentacje" type="text">
                            </label>
                        </div>
                    </div>
                    <input name="selectedUser" th:value="${user.login}" type="hidden">
                    <input name="currentPage" th:value="${currentPage}" type="hidden">

                </section>
            </td>
            <td>
                <button class="btn btn-primary" type="submit">Wyślij!</button>
            </td>
        </form>
    </tr>

    </tbody>
</table>

<div th:if="${totalPages > 1}">
    <div class="row col-sm-10">
        <div class="col-sm-2">
            Total Rows: [[${totalItems}]]
        </div>
        <div class="col-sm-1">
					<span th:each="i: ${#numbers.sequence(1, totalPages)}">
						<a th:href="@{'/page/' + ${i}+ '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}"
                           th:if="${currentPage != i}">[[${i}]]</a>
						<span th:unless="${currentPage != i}">[[${i}]]</span>  &nbsp; &nbsp;
					</span>
        </div>
        <div class="col-sm-1">
            <a th:href="@{'/page/' + ${currentPage + 1}+ '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}"
               th:if="${currentPage < totalPages}">Next</a>
            <span th:unless="${currentPage < totalPages}">Next</span>
        </div>

        <div class="col-sm-1">
            <a th:href="@{'/page/' + ${totalPages}+ '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}"
               th:if="${currentPage < totalPages}">Last</a>
            <span th:unless="${currentPage < totalPages}">Last</span>
        </div>
    </div>
</div>
</div>
</body>

<!--/.Navbar-->
<script src="/js/jquery-3.4.1.min.js"></script>
<!-- Bootstrap tooltips -->
<script src="/js/popper.min.js" type="text/javascript"></script>
<!-- Bootstrap core JavaScript -->
<script src="/js/bootstrap.js" type="text/javascript"></script>
<!-- MDB core JavaScript -->
<script src="/js/mdb.min.js" type="text/javascript"></script>

</body>
</html>
